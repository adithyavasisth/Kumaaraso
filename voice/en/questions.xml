<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" application="../index.xml">
    <menu id="questions" dtmf="true">
        <!-- provide a disclaimer and ask the user to select an option -->
        <prompt xml:lang="en-us">
            <audio src="./audio/en-questions.wav"/>
        </prompt>
        <choice dtmf="1" next="#ask-question"></choice>
        <choice dtmf="2" next="#listen-answer"></choice>
        <choice dtmf="3" next="./menu.xml"></choice>
        <choice dtmf="9" next="../language.xml"></choice>
        <!-- repeat the menu for no match or no input -->
        <noinput>
            <prompt>
                <audio src="./audio/en-invalid.wav"/>
            </prompt>
            <reprompt />
        </noinput>
        <nomatch>
            <prompt>
                <audio src="./audio/en-invalid.wav"/>
            </prompt>
            <reprompt />
        </nomatch>
    </menu>

    <!-- record the user's experience and play it back to them -->
    <form id="ask-question">
        <var name="caller" expr="session.connection.remote.uri"/>
        <record name="question" beep="true" maxtime="30s" type="video/mp4" dtmfterm="true">
            <!-- prompt the user to ask a question -->
            <prompt xml:lang="en-us">
                <audio src="./audio/en-ask.wav"/>
            </prompt>
            <filled>
                <prompt xml:lang="en-us">
                    <audio src="./audio/en-confirm.wav"/>
                </prompt>
                <value expr="question" />
            </filled>
        </record>
        <block>
            <prompt xml:lang="en-us">
                <audio src="./audio/en-asked.wav"/>
            </prompt>
            <submit next="http://34.70.4.81:8000/" method="post" namelist="caller question" enctype="multipart/form-data" />
            <!-- <goto next="./menu.xml" /> -->
        </block>
    </form>

    <form id="listen-answer">
        <!-- not implemented for this demo and will be fetched from the database in the future -->
        <block>
            <prompt xml:lang="en-us">
                <audio src="./audio/en-listen.wav"/>
            </prompt>
            <goto next="./menu.xml" />
        </block>
    </form>
</vxml>
